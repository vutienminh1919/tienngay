!function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=8)}({8:function(e,t,a){e.exports=a(9)},9:function(e,t){$(document).ajaxStart((function(){$("#loading").show();var e=window.screen.height;$("#loading, .right-col iframe").css("height",e)})).ajaxStop((function(){$("#loading").hide()})),$(document).ready((function(){function e(){this.initData={},this.objJson={},this.current_page=1,this.records_per_page=45,this.selectedIds=[];this.init=function(e){this.initData=e;var t=Object.keys(e).map((function(t){return[Number(t),e[t]]}));this.objJson=t.sort((function(e,t){var a=e[0].updated_at,r=t[0].updated_at;return new Date(a)>new Date(r)?1:-1})),this.createPanigation(),this.changePage(1),$("#select-all").off().on("click",this.selectAll.bind(this)),$("#export-excel").on("click",this.exportExcel.bind(this)),$("#print-data").on("click",this.printData.bind(this))},this.selectAll=function(e){var t=[];$(".selected_item").prop("checked",e.target.checked),this.objJson.forEach((function(a,r){a[1].selected=e.target.checked,e.target.checked&&t.push(a[1].id)})),this.selectedIds=t},this.selectItem=function(e){var t=$(e.target).attr("data-no");if(this.objJson[t][1].selected=e.target.checked,e.target.checked&&-1===this.selectedIds.indexOf(this.objJson[t][1].id))this.selectedIds.push(this.objJson[t][1].id);else{var a=this.selectedIds.indexOf(this.objJson[t][1].id);a>-1&&this.selectedIds.splice(a,1)}},this.numPages=function(){return Math.ceil(this.objJson.length/this.records_per_page)},this.prevPage=function(){this.current_page>1&&(this.current_page--,this.changePage(this.current_page))},this.nextPage=function(){this.current_page<this.numPages()&&(this.current_page++,this.changePage(this.current_page))},this.changePageAction=function(e){var t=$(e.target).attr("data-page");this.changePage(t)},this.changePage=function(e){var t=document.getElementById("btn_prev"),a=document.getElementById("btn_next"),r=document.getElementById("listingTable"),n=document.getElementById("page");e<1&&(e=1),e>this.numPages()&&(e=this.numPages()),this.current_page=e,r.innerHTML="";for(var i=(e-1)*this.records_per_page;i<e*this.records_per_page;i++)this.objJson[i]&&(r.innerHTML+=this.createEL(this.objJson[i][1],i+1,!0));if(n.innerHTML=e+"/"+this.numPages(),1==e?t.classList.add("disabled"):t.classList.remove("disabled"),e==this.numPages()?a.classList.add("disabled"):a.classList.remove("disabled"),$(".page-number.active").removeClass("active"),$("[data-page="+e+"]").parent().addClass("active"),$(".selected_item").on("click",this.selectItem.bind(this)),this.numPages()>10){var s=0,o=0;this.numPages()-Number(e)<Number(5)?s=Number(e)-2*Number(5)+(this.numPages()-Number(e)):(s=Number(e)-Number(5))<1&&(s=1),Number(e)-Number(s)<Number(5)?o=Number(e)+2*Number(5)-(Number(e)-Number(s)):(o=Number(e)+Number(5))>this.numPages()&&(o=this.numPages()),$(".page-number").addClass("hide-item");for(var c=s;c<=o;c++)$("[data-page="+c+"]").parent().removeClass("hide-item"),$("[data-page="+c+"]").text($("[data-page="+c+"]").attr("data-page"));$("[data-page="+Number(s-1)+"]").parent().removeClass("hide-item"),$("[data-page="+Number(s-1)+"]").text("..."),$("[data-page="+Number(o+1)+"]").parent().removeClass("hide-item"),$("[data-page="+Number(o+1)+"]").text("...")}},this.numPages=function(){return Math.ceil(this.objJson.length/this.records_per_page)},this.createPanigation=function(){$("li.page-number").remove();for(var e=1;e<=this.numPages();e++)1==e?$("<li class='page-item page-number active'><a class='page-link' data-page='"+e+"' href='javascript:void(0);'>"+e+"</a></li>").insertBefore("#btn_next"):$("<li class='page-item page-number'><a class='page-link' data-page='"+e+"' href='javascript:void(0);'>"+e+"</a></li>").insertBefore("#btn_next");$("#btn_prev").off().on("click",this.prevPage.bind(this)),$("#btn_next").off().on("click",this.nextPage.bind(this)),$(".pagination").off().on("click",".page-number",this.changePageAction.bind(this))},this.createEL=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"clone-object",n=$("#"+r).find("#clone-item").clone(),i=n.find("td");return $.each(i,(function(t,a){var r=$(i[t]).attr("data-attr"),n=e[r];$(i[t]).attr("format-number")?(_numberFormated=fomatNumber(n),$(i[t]).text(_numberFormated)):$(i[t]).text(n)})),a?n.find("#transaction_no").text(t):n.find("#selected_item").attr("data-no",t),n.find("#details-show-info__id__").attr("data-id",e.id),n.find("#details-show-info__id__").attr("href","transaction/"+e.id),e.selected?n.find("#selected_item").attr("checked",!0):n.find("#selected_item").attr("checked",!1),n.html()},this.exportExcel=function(e){e.preventDefault();for(var t=$(e.target).attr("file-name"),a=$(e.target).attr("clone-table"),r="",n=1,i=0;i<this.objJson.length;i++)this.objJson[i][1].selected&&(r+="<tr>"+this.createEL(this.objJson[i][1],n,!0,a)+"</tr>",n++);var s=$("#"+a).clone();s.find("th:last-child").remove(),s.find("#table-rows").html($.parseHTML(r)),s.table2excel({exclude:".no-export",name:"Worksheet Name",filename:t+".xls",preserveColors:!1})},this.printData=function(e){e.preventDefault();for(var t=$(e.target).attr("clone-table"),a="",r=1,n=0;n<this.objJson.length;n++)this.objJson[n][1].selected&&(a+="<tr>"+this.createEL(this.objJson[n][1],r,!0)+"</tr>",r++);var i=$("#"+t).clone();i.find("#table-rows").html($.parseHTML(a)),i.removeAttr("hidden"),i.find("th:last-child, td:last-child").hide();var s=window.open();s.document.write(i.prop("outerHTML")),s.print(),s.close()},fomatNumber=function(e){return(new Intl.NumberFormat).format(e)}}var t=new e,a=$('[name="_token"]').val();function r(a){t&&(t=null),(t=new e).init(a)}r(transactions),$("#select-time").datepicker({format:"yyyy-mm",startView:"months",minViewMode:"months",autoclose:!0}).on("change",(function(e){var t={time:$("#select-time").val(),_token:a};$.ajax({type:"POST",url:getListByMonthUrl,data:t,success:function(e){console.log(e),200==e.status?(console.log(e.data),r(e.data.data),$("#total_transaction").text(e.data.totalTransaction),$("#total_paid_amount").text(e.data.totalAmount)):($("#errorModal").find(".msg_error").text(e.message),$("#errorModal").show())},error:function(e,t){0===e.status||(404==e.status||(500==e.status||("parsererror"===t||("timeout"===t||("abort"===t||e.responseText))))),$("#errorModal").show()}})})),$("#submit-data").on("click",(function(e){e.preventDefault(),$("#submit-data").prop("disabled",!0);var t=$("#search-form"),a=t.attr("action");$.ajax({type:"POST",url:a,data:t.serialize(),success:function(e){console.log(e),200==e.status?(console.log(e.data),r(e.data.data),$("#total_transaction").text(e.data.totalTransaction),$("#total_paid_amount").text(e.data.totalAmount)):($("#errorModal").find(".msg_error").text(e.message),$("#errorModal").show()),$("#submit-data").prop("disabled",!1),$("#fillter-content").hide()},error:function(e,t){var a="";a=0===e.status?"Not connect.\n Verify Network.":404==e.status?"Requested page not found. [404]":500==e.status?"Internal Server Error [500].":"parsererror"===t?"Requested JSON parse failed.":"timeout"===t?"Time out error.":"abort"===t?"Ajax request aborted.":"Uncaught Error.\n"+e.responseText,$("#submit-data").prop("disabled",!1),$("#errorModal").find(".msg_error").text(a),$("#errorModal").show()}})}))}))}});